# data "aws_iam_policy_document" "assume_by_pipeline" {
#   statement {
#     sid = "AllowAssumeByPipeline"
#     effect = "Allow"
#     actions = ["sts:AssumeRole"]

#     principals {
#       type = "Service"
#       identifiers = ["codepipeline.amazonaws.com"]
#     }
#   }
# }

# resource "aws_iam_role" "pipeline_role" {
#   name = "pipeline-ecs-service-role"
#   assume_role_policy = "${data.aws_iam_policy_document.assume_by_pipeline.json}"
# }

# data "aws_iam_policy_document" "pipeline" {
#   statement {
#     sid = "AllowS3"
#     effect = "Allow"

#     actions = [
#       "s3:GetObject",
#       "s3:ListBucket",
#       "s3:PutObject",
#     ]

#     resources = ["*"]
#   }

#   statement {
#     sid = "AllowECR"
#     effect = "Allow"

#     actions = ["ecr:DescribeImages"]
#     resources = ["*"]
#   }

#   statement {
#     sid = "AllowCodebuild"
#     effect = "Allow"

#     actions = [
#       "codebuild:BatchGetBuilds",
#       "codebuild:StartBuild"
#     ]
#     resources = ["*"]
#   }

#   statement {
#     sid = "AllowCodedepoloy"
#     effect = "Allow"

#     actions = [
#       "codedeploy:CreateDeployment",
#       "codedeploy:GetApplication",
#       "codedeploy:GetApplicationRevision",
#       "codedeploy:GetDeployment",
#       "codedeploy:GetDeploymentConfig",
#       "codedeploy:RegisterApplicationRevision"
#     ]
#     resources = ["*"]
#   }

#   statement {
#     sid = "AllowResources"
#     effect = "Allow"

#     actions = [
#       "elasticbeanstalk:*",
#       "ec2:*",
#       "elasticloadbalancing:*",
#       "autoscaling:*",
#       "cloudwatch:*",
#       "s3:*",
#       "sns:*",
#       "cloudformation:*",
#       "rds:*",
#       "sqs:*",
#       "ecs:*",
#       "opsworks:*",
#       "devicefarm:*",
#       "servicecatalog:*",
#       "iam:PassRole"
#     ]
#     resources = ["*"]
#   }
# }

# resource "aws_iam_role_policy" "pipeline" {
#   role = "${aws_iam_role.pipeline_role.name}"
#   policy = "${data.aws_iam_policy_document.pipeline.json}"
# }